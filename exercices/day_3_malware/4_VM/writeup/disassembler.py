code = bytes.fromhex("0A000000000000000C000000010000000A00000001000000090000000200000001000000120000000A000000000000000C000000010000000A000000010000000900000007000000030000001200000009000000490000000E000000090000004E0000000E000000090000003A0000000E00000009000000200000000E0000000F00000011000000000000000100000001000000110000000A000000010000000100000009000000C907CC0005000000070000004200000009000000700000000E00000009000000650000000E00000009000000720000000E00000009000000640000000E00000009000000750000000E000000090000000A0000000E000000060000005400000009000000670000000E00000009000000610000000E00000009000000670000000E000000090000006E0000000E00000009000000650000000E000000090000000A0000000E000000")

# Convert to int array
code = [int.from_bytes(code[x:x+4], byteorder='little') for x in range(0, len(code), 4)]

# Disass every instruction
pc = 0
while pc != len(code):
    print(f"Addr: {pc:#2x}\t",end='')
    match code[pc]:

        case 0x01:
            print("ADD")

        case 0x03:
            print("MUL")

        case 0x05:
            print("is ==")

        case 0x06:
            pc += 1
            arg = code[pc]
            print(f"Jump ({arg :#x})")
        
        case 0x07:
            pc += 1
            arg = code[pc]
            print(f"Jump if equals ({arg :#x})")

        case 0x09:
            pc += 1
            arg = code[pc]
            print(f"Load CONST ({arg :#x})")

        case 0x0A:
            pc += 1
            arg = code[pc]
            print(f"Load arg ({arg :#x})")

        case 0x0C:
            pc += 1
            arg = code[pc]
            print(f"Store local ({arg :#x})")

        case 0x0E:
            print("PUTC")

        case 0x0F:
            print("GETC")

        case 0x11:
            pc += 1
            arg1 = code[pc]
            pc += 1
            arg2 = code[pc]
            pc += 1
            arg3 = code[pc]
            print(f"CALL {arg1 = :#x} {arg2 = :#x} {arg3 = :#x}")

        case 0x12:
            print("RET")

        case _:
            print(f"Unknown opcode: {hex(code[pc])}")
            exit(0)

    pc += 1